# OCRクレデンシャル検出ライブラリ

画像内のテキストをOCRで抽出し、その中からクレデンシャル（APIキー、パスワードなど）を検出するRustライブラリです。

## 概要

このライブラリは、スクリーンショットや画像内に含まれる可能性のあるAPIキーやパスワードなどの機密情報を自動的に検出します。OCR（光学文字認識）技術を使用して画像からテキストを抽出し、そのテキスト内から正規表現パターンマッチングなどの手法を用いてクレデンシャルを特定します。

主な機能：
- 画像からのテキスト抽出（OCR）
- APIキーの検出（AWS、GitHub、Googleなど）
- パスワードの検出
- カスタム検出器の追加サポート
- バッチ処理による複数画像の一括スキャン

## インストール方法

Cargo.tomlに以下を追加してください：

```toml
[dependencies]
ocr-credential-detector = "0.1.0"
```

または、以下のコマンドを実行してください：

```bash
cargo add ocr-credential-detector
```

## Exampleの利用方法

### 基本的な使用例

```rust
use ocr_credential_detector::CredentialDetector;
use std::path::Path;

fn main() -> Result<(), Box<dyn std::error::Error>> {
    // クレデンシャル検出器の初期化
    let detector = CredentialDetector::new()?;
    
    // 画像からクレデンシャルを検出
    let detections = detector.detect_from_path("path/to/image.png")?;
    
    // 検出結果を表示
    for detection in detections {
        println!("検出されたクレデンシャル: {}", detection.text);
        println!("検出器: {}", detection.detector_name);
        println!("クレデンシャルスコア: {:.2}", detection.credential_score);
    }
    
    Ok(())
}
```

他の例を見たい場合は`./examples/`を確認してください。

## まだ早くないです

このライブラリは現在PoC（概念実証）段階であり、処理速度は約1fps程度です。これは実用的な速度とは言えませんが、今後の開発で大幅な改善を予定しています。

将来的には、一般的なCPUまたはGPUリソース(の一部)を効率的に活用することで、120fpsを目指しています。これにより、リアルタイムでのOCR -> クレデンシャル検出が可能になり、より幅広いユースケースに対応できるようになります。

現在の実装は機能性の実証を主な目的としており、パフォーマンスの最適化は今後の開発フェーズで取り組む予定です。

## なぜ、Rustで書くのか？

Rustを選択した理由は、単に処理速度を追求するためではありません。もし純粋に速度だけを求めるなら、高速な検出モデルの実験や改良が容易なPythonの方が適しているでしょう。Pythonの遅い部分はこのような実行時間のほとんどがNNで占められる今回のようなユースケースではそこまで問題にはならないと考えています。

Rustを選んだ主な理由は以下の通りです：

### 優れたポータビリティ

Rustのコードは非常に高いポータビリティを持っています。様々なプラットフォームやデバイスで一貫して動作し、依存関係の管理も容易です。これにより、このライブラリを多様な環境で利用することができます。

### 長期的なビジョン

このプロジェクトでは、検出モデルの高速化（量子化や蒸留など）を進める際も、Pythonなどの言語に移行せず、一貫してRustでの実装を維持していく予定です。これにより、コードベースの一貫性を保ち、メンテナンスを容易にします。

### 安全性と信頼性

クレデンシャル検出という機密性の高い処理を扱うため、Rustのメモリ安全性や並行処理の安全性は大きな利点となります。コンパイル時の厳格なチェックにより、多くのバグやセキュリティ問題を未然に防ぐことができます。

### Rust vs Go

上の例を鑑みて、RustとGoが主な選択肢として挙がりました。
最終的には個人的な熟練度と趣味でRustを選んでます。

## ライセンス

MIT